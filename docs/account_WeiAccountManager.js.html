<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>account/WeiAccountManager.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-install.html">Getting Started</a></li><li class="nav-item"><a href="tutorial-usage.html">Using Wei.js</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Wei.html">Wei</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Wei.html#contract">contract</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiABIType.html">WeiABIType</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiABIType.html#parse">parse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiABIType.html#parseType">parseType</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiAccount.html">WeiAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiAccount.html#balance">balance</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiAccount.html#sendTransaction">sendTransaction</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiAccountManager.html">WeiAccountManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiAccountManager.html#addAccount">addAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiAccountManager.html#addKeyAccount">addKeyAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiAccountManager.html#addRPCAccount">addRPCAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiAccountManager.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiAccountManager.html#has">has</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiAccountManager.html#newKeyAccount">newKeyAccount</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiContract.html">WeiContract</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContract.html#at">at</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContract.html#deploy">deploy</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiContractEvent.html">WeiContractEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContractEvent.html#createFilter">createFilter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContractEvent.html#find">find</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContractEvent.html#listen">listen</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiContractEventListener.html">WeiContractEventListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContractEventListener.html#cancel">cancel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContractEventListener.html#listen">listen</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContractEventListener.html#query">query</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiContractFunction.html">WeiContractFunction</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiContractFunction.html#exec">exec</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiEventABI.html">WeiEventABI</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiEventABI.html#decode">decode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiEventABI.html#sig">sig</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiFunctionABI.html">WeiFunctionABI</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiFunctionABI.html#decode">decode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiFunctionABI.html#encode">encode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiHttpProvider.html">WeiHttpProvider</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiHttpProvider.html#send">send</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiKeyAccount.html">WeiKeyAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiKeyAccount.html#.create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiKeyAccount.html#nonce">nonce</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiKeyAccount.html#sendTransaction">sendTransaction</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiKeyAccount.html#sign">sign</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiProvider.html">WeiProvider</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiProvider.html#rpc">rpc</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiProvider.html#send">send</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiRLP.html">WeiRLP</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiRLP.html#.decode">decode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiRLP.html#.encode">encode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiRPC.html">WeiRPC</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiRPC.html#modules">modules</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiRPCAccount.html">WeiRPCAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiRPCAccount.html#sendTransaction">sendTransaction</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiTransaction.html">WeiTransaction</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTransaction.html#.fromObject">fromObject</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTransaction.html#encode">encode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTransaction.html#sign">sign</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTransaction.html#toObject">toObject</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiType.html">WeiType</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiType.html#decode">decode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiType.html#encode">encode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiTypeBytes.html">WeiTypeBytes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeBytes.html#decode">decode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeBytes.html#encode">encode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiTypeDynamic.html">WeiTypeDynamic</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeDynamic.html#decode">decode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeDynamic.html#encode">encode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeDynamic.html#size">size</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiTypeFixed.html">WeiTypeFixed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeFixed.html#decode">decode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeFixed.html#encode">encode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiTypeNumber.html">WeiTypeNumber</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeNumber.html#decode">decode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiTypeNumber.html#encode">encode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiTypeTuple.html">WeiTypeTuple</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiUtil.html">WeiUtil</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiUtil.html#.hash">hash</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiUtil.html#.hex">hex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiUtil.html#.isObj">isObj</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WeiWeb3Provider.html">WeiWeb3Provider</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WeiWeb3Provider.html#send">send</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">account/WeiAccountManager.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const WeiAccount = require('./WeiAccount.js');
const WeiKeyAccount = require('./WeiKeyAccount.js');
const WeiRPCAccount = require('./WeiRPCAccount.js');

/**
 * A helper class to aid in the management and creation of the various WeiAccount subclasses.
 */
class WeiAccountManager {
    /**
     * Create an account manager
     *
     * @param {Wei} wei - The wei object to use
     */
    constructor(wei) {
        this._wei = wei;
        this.accounts = [];
    }

    /**
     * Get the amount of accounts loaded
     *
     * @returns {number} Amount of accounts loaded
     */
    get length() {
        return this.accounts.length;
    }

    /**
     * Get an account stored. Either by index or by address.
     *
     * @param {(number|string)} query - Either the index of the account or the address of the associated account
     * @returns {WeiAccount} Returns the result of the query, or null if not found.
     */
    get(query) {
        if ( typeof query == 'number' ) {
            return this.accounts[query];
        }
        else if ( typeof query == 'string' &amp;&amp; query.substring(0, 2) == '0x' ) {
            for ( const account of this.accounts ) {
                if ( query == account.address ) {
                    return account;
                }
            }

            return null;
        }
        else {
            throw new Error("Unable to query accounts with unknown type");
        }
    }

    /**
     * Determines if the account manager has an account with the given address
     *
     * @param {string} address - The address to query.
     * @returns {boolean} Whether or not the account was found.
     */
    has(address) {
        return this.get(address) != null;
    }

    /**
     * Add an {@link WeiAccount} to the account manager. Will ignore duplicates (checked by address).
     *
     * @param {WeiAccount} account - The account being added.
     */
    addAccount(account) {
        if ( !(account instanceof WeiAccount) ) {
            throw new Error("WeiAccountManager.addAccount only takes WeiAccount objects");
        }

        // Skip adding a duplicate
        if ( this.has(account.address) ) {
            return;
        }

        this.accounts.push(account);
    }

    /**
     * Add an RPC account by the address. This will initiate a WeiRPCAccount object and add it
     * to the account manager.
     *
     * @param {string} address - The address of the account.
     * @returns {WeiRPCAccount} The created account.
     */
    addRPCAccount(address) {
        if ( typeof address != 'string' ) {
            throw new Error("WeiAccountManager.addRPCAddress only takes strings");
        }

        const account = new WeiRPCAccount(this._wei, address);

        this.addAccount(account);
        return account;
    }

    /** 
     * Add an account by private key. This will initiate a {@link WeiKeyAccount} object and add it
     * to the account manager.
     *
     * @param {string|Buffer} privateKey - The private key of the account
     * @returns {WeiKeyAccount} The created account.
     */
    addKeyAccount(privateKey) {
        if ( typeof privateKey != 'string' &amp;&amp; !(privateKey instanceof Buffer) ) {
            throw new Error("WeiAccountManager.addKeyAccount only takes strings and buffers");
        }

        const account = new WeiKeyAccount(this._wei, privateKey);

        this.addAccount(account);
        return account;
    }

    /**
     * Use the {@link WeiKeyAccount.create} method to create a new {@link WeiKeyAccount} and add it
     * to the account manager.
     *
     * @returns {WeiKeyAccount} The created account.
     * @see {@link WeiKeyAccount.create} is internally used.
     */
    newKeyAccount() {
        const account = WeiKeyAccount.create(this._wei);

        this.addAccount(account);

        return account;
    }
}

module.exports = WeiAccountManager;</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Jul 06 2018 18:03:00 GMT-0400 (Eastern Daylight Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
